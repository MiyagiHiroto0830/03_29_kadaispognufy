<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>sanmonsyousetu</title>
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <link rel="stylesheet" type="text/css" href="./css/responsive.css">
</head>

<body>
    <audio id="sound1" preload="auto">
        <source src="img/y2mate.com - King Gnu - 三文小説.mp3" type="audio/wav">
    </audio>
    <div class="main">
        <div class="img-box">
            <img class="imgimg" src="img/sanmonsyousetu.jpg" width="95%" height="auto">
        </div>
        <p class="text1">三文小説</p>
        <p class="text2">King Gnu</p>
        <ul>
            <li no="1" class="add" onclick="addfav('1')"><span>♡</span></li>
            <li no="1" class="remove" onclick="removefav('1')"><span>♥</span></li>
        </ul>
        <div id="seekbar"></div>
        <div id="time">
            <span id="current">00:00</span>
            <span id="duration">00:00</span>
        </div>
        <div class="btn-logo-box">
            <img id="backbtn1" src="img/backicon.png" width="60px" height="60px">
            <img id="start_btn1" src="img/start_btn.png" width="32%" height="auto">
            <img id="pause_btn1" src="img/stop_btn.png" width="32%" height="auto">
            <img id="nextbtn1" src="img/nexticon.png" width="60px" height="60px">
        </div>
        <div class="repeat">
            <img id="repeat" src="img/repeaticon.png" width="10%" height="10%">
        </div>
        <p class="llick">この世界の誰もが
            君を忘れ去っても<br>
            随分老けたねって<br>
            今日も隣で笑うから<br>
            怯えなくて良いんだよ<br>
            そのままの君で良いんだよ<br>
            増えた皺の数を隣で数えながら<br>
            僕らの人生が<br>
            三文小説だとしても<br>
            投げ売る気は無いね<br>
            何度でも書き直すよ<br>
            誰もが愛任せ<br>
            いつまでも彷徨う定め<br>
            この小説(はなし)の果ての<br>
            その先を書き足すよ<br>
            真実と向き合うためには<br>
            一人にならなきゃいけない時がある<br>
            過ちだと分かっていても尚<br>
            描き続けたい物語があるよ<br>
            あゝ<br>
            駄文ばかりの脚本と<br>
            三文芝居にいつ迄も<br>
            付き合っていたいのさ<br>
            あゝ<br>
            君の不器用な<br>
            表情や言葉一つで<br>
            救われる僕がいるから<br>
            あの頃の輝きが<br>
            息を潜めたとしても<br>
            随分老けたねって<br>
            明日も隣で笑うから<br>
            悲しまないで良いんだよ<br>
            そのままの君が良いんだよ<br>
            過ぎゆく秒針を隣で数えながら<br>
            止めどなく流るる泪雨が<br>
            小説のように人生を何章にも<br>
            区切ってくれるから<br>
            愚かだと分かっていても尚<br>
            足掻き続けなきゃいけない物語があるよ<br>
            あゝ<br>
            立ち尽くした<br>
            あの日の頼りない背中を<br>
            今なら強く押して見せるから<br>
            あゝ<br>
            僕のくだらない<br>
            表情や言葉一つで<br>
            微笑んだ君がいるから<br>
            あゝ<br>
            駄文ばかりの脚本と<br>
            三文芝居にいつ迄も<br>
            付き合っていたいのさ<br>
            あゝ<br>
            君の不器用な<br>
            表情や言葉一つで<br>
            救われる僕がいるから<br>
            あゝ<br>
            立ち尽くした<br>
            あの日の頼りない背中を<br>
            今なら強く押して見せるから<br>
            あゝ<br>
            僕のくだらない<br>
            表情や言葉一つで<br>
            微笑んだ君がいるから<br>
            この世界の誰もが<br>
            君を忘れ去っても<br>
            随分老けたねって<br>
            今日も隣で笑うから<br>
            怯えなくて良いんだよ<br>
            そのままの君で良いんだよ<br>
            増えた皺の数を隣で数えながら</p>
        <div class="btn-box2">
            <input class="backbutton" type="button" value="back" style="width:100px ; height:50px" on
                onclick="location.href='spognufy2.html'">
        </div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/3.5.2/firebase-ui-auth__ja.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="js/firebase.js"></script>
    <script src="js/spognufy.js"></script>


    <script>
        $(function () {
            $("#start_btn1").on("click", function () {
                $("#sound1")[0].play();
            });
            $("#pause_btn1").on("click", function () {
                $("#sound1")[0].pause();
            });
            $("#nextbtn1").on("click", function () {
                location.href = "musicminibox2.html"
            });
            $("#backbtn1").on("click", function () {
                location.href = "musicminibox7.html"
            });
            $("#sound1").on("ended", function () {
                location.href = "musicminibox2.html"
            });
            // repeat機能
            let count = 1;
            $("#repeat").on("click", function () {
                if (count % 2 !== 0) {
                    $("#sound1")[0].loop = true;
                    alert("repert機能をonにしました")
                } else {
                    $("#sound1")[0].loop = false;
                    alert("repert機能をoffにしました")
                }
                count++;
            });
            // プログレスバー
            const audio = $("#sound1")[0];
            audio.addEventListener("timeupdate", (e) => {
                const current = Math.floor(audio.currentTime)
                const duration = Math.round(audio.duration)
                if (!isNaN(duration)) {
                    document.getElementById('current').innerHTML = current
                    document.getElementById('duration').innerHTML = duration
                    const percent = Math.round((audio.currentTime / audio.duration) * 1000) / 10
                    document.getElementById('seekbar').style.backgroundSize = percent + '%'
                }
            })
            document.getElementById('seekbar').addEventListener("click", (e) => {
                const duration = Math.round(audio.duration)
                if (!isNaN(duration)) {
                    const mouse = e.pageX
                    const element = document.getElementById('seekbar')
                    const rect = element.getBoundingClientRect()
                    const position = rect.left + window.pageXOffset
                    const offset = mouse - position
                    const width = rect.right - rect.left
                    audio.currentTime = Math.round(duration * (offset / width))
                }
            })
            function playTime(t) {
                let hms = ''
                const h = t / 3600 | 0
                const m = t % 3600 / 60 | 0
                const s = t % 60
                const z2 = (v) => {
                    const s = '00' + v
                    return s.substr(s.length - 2, 2)
                }
                if (h != 0) {
                    hms = h + ':' + z2(m) + ':' + z2(s)
                } else if (m != 0) {
                    hms = z2(m) + ':' + z2(s)
                } else {
                    hms = '00:' + z2(s)
                }
                return hms
            }

            audio.addEventListener("timeupdate", (e) => {
                const current = Math.floor(audio.currentTime)
                const duration = Math.round(audio.duration)
                if (!isNaN(duration)) {
                    document.getElementById('current').innerHTML = playTime(current)
                    document.getElementById('duration').innerHTML = playTime(duration)
                }
            })
        });


    </script>
</body>

</html>